<div id="tutorialOverlay" onclick="this.style.display='none'" style="position:fixed; inset:0; background:rgba(255,140,66,0.95); z-index:10001; display:none; flex-direction:column; justify-content:center; align-items:center; color:white; padding:40px; text-align:center;">
    <h2>Welcome to Chatter Box!</h2>
    <p>üè† <b>Home:</b> View stories and post photos to the main feed.</p>
    <p>üîç <b>Search:</b> Find other users on the platform.</p>
    <p>üë§ <b>Profile:</b> View your personal grid of posts.</p>
    <p>‚öôÔ∏è <b>Settings:</b> Update your profile picture and name.</p>
    <p>‚≠ï <b>Stories:</b> Colorful rings mean a new post. Grey means you've seen it!</p>
    <button style="background:white; color:#FF8C42; margin-top:20px;">Got it!</button>
</div>

<script type="module">
    // ... inside your init(u) function, update the onValue(ref(db, 'stories')) section ...

    onValue(ref(db, 'stories'), (storySnap) => {
        const allStories = storySnap.val() || {};
        onValue(ref(db, 'users'), (userSnap) => {
            storyList.innerHTML = "";
            
            // 1. THE SYSTEM BOT (Tutorial Friend)
            const botDiv = document.createElement('div');
            botDiv.className = 'story';
            botDiv.innerHTML = `
                <div class="story-ring" style="background: linear-gradient(45deg, #00dbde, #fc00ff);">
                    <div class="story-inner" style="background-color: #262626; color: white; display: flex; align-items: center; justify-content: center; font-size: 20px;">ü§ñ</div>
                </div>
                <span>Chatter Bot</span>`;
            botDiv.onclick = () => {
                document.getElementById('tutorialOverlay').style.display = 'flex';
            };
            storyList.appendChild(botDiv);

            // 2. YOUR STORY CIRCLE
            const myStory = allStories[u.uid];
            const meDiv = document.createElement('div');
            meDiv.className = 'story';
            meDiv.innerHTML = `
                <div class="story-ring ${myStory ? 'ring-seen' : 'ring-none'}">
                    <div class="story-inner" style="background-image:url(${myData.pfp})">
                        <div class="add-plus" id="uploadPlus">+</div>
                    </div>
                </div>
                <span>You</span>`;
            // ... (rest of the meDiv logic)
            storyList.appendChild(meDiv);

            // 3. FRIENDS STORIES
            // ... (rest of the friend story logic)
        });
    });
</script>
